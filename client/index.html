<!DOCTYPE html>
<html lang="en" id="htmlroot">

<head>
 <meta charset="UTF-8" />
 <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
 <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
 <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
 <link rel="manifest" href="/site.webmanifest">
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <link rel="stylesheet" type="text/css" href="https://unli.xyz/awsm_theme_pearl-lusta.css" media="all">

 <title>Ejectube</title>
 <meta name="description" content="Escape the algorithm">
</head>

<!--

you have been awarded hacker level 1.

to raise your hacker level disclose by email (or Pull Request) of any exploits that you discover

chapmanjacobd @/t gmail

-----------------------=#*##+#%%**#####+#*####*%*##+**##@@@@#--------------------------
-----------------------#**%**%%%*+##*##*####**#%####*###@@@@#--------------------------
-----------------------%*#%**%###+##*#*##*###*##########@@@@#=-------------------------
-----------------------%#%#+#%###+##+#**%#+*%%##%*###*##@@%@@+-------------------------
-----------------------%#%%*#%#**#+##*#**#####*#****###%@@%@@+-------------------------
-----------------------#%@%+%#*####***+=--=+++*****#*%%@@%@@%+-------------------------
-----------------------*###+%##*#**+=++----------==+*##%@#@@+--------------------------
------------------------###*###%#*==**+---=--------=+*%@%%@@=--------------------------
-----------------------=##*%+##*#*++##==-=+==------==**%%@@@%%*+=----------------------
--------------------+##%%#*#%##+%#+*###=*+*+***=---==**%@@%@@@@%#*=--------------------
---------------==+#%%@@@@%#*#%#*##+#**+*#+#*+---==+***##@@@%@@@@@%#*-------------------
-----==+++##%%%%%%%@@@@@@@%#*#@%*#+#++**##*=*#*##***+####@@@@@%@@@%##------------------
=+*##%%%%%%%%%%%@@@@@@@@@@%=%*%@*#**#*+#+#=***#*+**++*####%@%@@%%@@%##-----------------
%%%%%@@%%%%@%%@@@@@@@@@@@@@%*#%%*#**#**#*+-=++=-----=*%#%%%@@%@@%@@%##-----------------
#%%@%%%%@@@%%@@@@@%%%@@@@@@@%%@%*#****+**---==-----+*##%@%@@@@%@%%@%##-----------------
%%%%#%@@@@%%@@@@@%%@@@@@@%@@@@@@##**#**+----++=---=**%@%%@@@@@@@%%@#%#-----------------
%%%#%%@@@%#@@@@@%%%@@@%%%%%@@@@@%%****--=+==+*=---+*#%%@@@@@@@@@@@%#%#-----------------
@%%#%@@@@#%@@@@@%%@@@%%%%%@@@@@%%###**-===+++==+=-+##%%@@@@@@@@@@@##@%+----------------
@@%%#%@@%#@@@@@%%@@%%%%@@@@@@##%#*###*---=========*#*@%#@@@@@@@@@%#%@%%#+=-------------
%@@%%%@@%#@@@@@%%@@%%%@@%#####%@#+=*##+--=++====+**+*@%#%@%%@@@@@##%@@%%%%%#*+**%#%#%#*
%%@@%%@@##@@@@@%%@%%%%%%###%######***##=-----=*#*++*#*##%@##%@@@%#%@@@@@%%%%%%%%%%%%###
#%%@@%@%##%@@@@@%@%%@@%*###%%###%###**#%*++++%#***######@@%##%@%##%@@@@@%%%%%%@%%##%%%%
%##%%%@%%%#@@@@@%@%@@#%###%@%######****##++**#**########@@%##%%##%@@@@@%%%#%###%%@@%%%%
%%##%%@%%@%%%@@@@@@@@##*###%###*##*#***#%*=+##**########%@%##%##%%%@@%%%%%%%@%##%%%####
@%%#%%@%%@@%%%@@@@@@@%#*+*#####**####*#*##+#%##**#######%%#*###%%%%%%%##%%%@@%%##%%%%%%
@%%%#%%%%%@@%%%@@@@@@@#%*+=+##*#**####+#%%*#%#+######%%%%++###%##%%%%%%%@@@@%%%###%%%@@
@%%%#%%%%%%@@%%%%@@@@@%%%##**#%*#####**#*%###*##**##%%@%**%##%%#%%%%###%%%@@%%##%%%%##%
@%%%#%%%%%%%%@@%%#%@@@@%%##*#*#%%%####**##%#*##**#%%%@#*#%#%%%%%%#####%%%%%%%%%%%@%%%%%
%%%%%%%%%%%%%@@%%%%%%%%@@@%@##+#@%%%####*########%@@@@*#%%#%%%%#%%%%%%%%@%%@%%%%@@@%%%%
%%%%%%@@%%%#%@@%##%%%%##%@%%@%*#@@%%%%#########%@@@@@%#%@%%@@%%%%%%%%#=##%%%%@@@%%%%%%%
%%%%@@%%%%%%@@%%%%%%%%#%@@@@%%%@@@@%%@%#######%@@%%%@@%%%%@@%%@%%%@%#+=#+#@%%@@@@%%%%%%
%%@@@%%%#%%@%%%%%%%%%%@@@@@@%%@@@@@%#@@%#####%@%%#%%@eat@%%%%@%%%%@%**%*#%@@#@@@@@@%%@@
@@@@%%#%@@%%%@@@@@@@@@@@@@@@%%@@@@@@#%@@%###%@%##%@@%%@@@@@@@%@@##%%##@%%%%@#@@@@@@@@@@

-->

<body>
 <script type="module" src="/src/main.ts"></script>
 <details>
  <summary>
   <span style="font-size: larger;">⏏️</span>
   <h1 title="pronounced eject ube 🍠" style="letter-spacing: 0.4rem;">🇺🅱️🇪</h1>
  </summary>
  <div> Escape the algorithm that <span title="sites">other tubes</span> impose on you</div>
 </details>

 <div x-data x-show="$store.sett.selectedVideo.ie_key != ''">
  <div x-html="app.renderVideo($store.sett.selectedVideo)"></div>
 </div>

 <div id="addNew" x-data="{
       playlistToAdd: '',
       async submit($event) {
         addNewInputSubmit.textContent = 'Loading'
         addNewInput.disabled = true
         addNewInputSubmit.disabled = true
         app.fetchPlaylist(this.playlistToAdd)
         addNewInput.value = ''
       }
     }">
  <label for="addNewInput">Add New Playlist or Channel:</label>
  <div id="addNewInputContainer">
   <input type="text" name="addNewInput" id="addNewInput" x-model="playlistToAdd"
    placeholder="https://www.youtube.com/playlist?list=PLQhhRxYCuOXX4Ru03gUXURslatUNxk7Pm" @keyup.enter="submit" />
   <button id="addNewInputSubmit" type="button" @click="submit()">Submit</button>
  </div>
 </div>

 <div x-data>
  <template x-if="$store.playlists.length == 0">
   <div style="text-align: center;min-height: 20em;position: relative;top: 2em;">
    <h3>
     Add a playlist or channel URL to get started
    </h3>
    <button type="button"
     @click="$store.autoplay=true;app.fetchPlaylist('https://www.youtube.com/playlist?list=PLQhhRxYCuOXX4Ru03gUXURslatUNxk7Pm')">or
     Load Demo
     Data ¯\_(ツ)_/¯</button>
   </div>
  </template>

  <template x-if="$store.playlists.length > 0">
   <div>

    <details>
     <summary>Settings</summary>
     <div class="columns2">
      <div id="dials" x-data>

       <h4>Display</h4>

       <div>
        <label for="entriesOrderByList">Order By</label>
        <select id="entriesOrderByList" x-model="$store.sett.entriesOrderBy" x-on:change="app.refreshView">
         <option value="random()">Random</option>
         <option value="uploader">Uploader</option>
         <option value="original_url">Playlist</option>
         <option value="duration">Duration</option>
         <option value="playlist_count">Playlist Count</option>
         <option value="title">Title</option>
        </select>
       </div>

       <div>
        <label for="entriesLimitList">Max videos shown per playlist</label>
        <select id="entriesLimitList" x-model="$store.sett.entriesLimit">
         <option value="">No Limit</option>
         <option>1</option>
         <option>5</option>
         <option>10</option>
         <option>50</option>
         <option>100</option>
         <option>500</option>
         <option>1000</option>
         <option>5000</option>
        </select>
       </div>

       <div @click="$nextTick(() => { app.refreshView() });">
        <input type="checkbox" id="hideWatched" x-model="$store.sett.hideWatched">
        <label for="hideWatched">Hide Watched</label>
       </div>

       <div>
        <input type="checkbox" id="compact" x-model="$store.sett.compact">
        <label for="compact">Compact UI</label>
       </div>

       <div>
        <button type="button" @click="app.changeTheBackgroundColor">🪅 Change the background colour 🪅</button>
       </div>

       <h4>Behavior</h4>

       <div>
        <input type="checkbox" id="automarkInput" x-model="$store.sett.automark">
        <label for="automarkInput">Auto-mark played videos as watched</label>
       </div>

       <div>
        <button type="button" @click="app.refreshPlaylists">Refresh Playlists (delayed by 3 days)</button>
       </div>

       <h4>Download</h4>
       <div>
        <button type="button" @click="app.exportDB()">Export Database</button>
       </div>

       <div>
        <button type="button" @click="app.exportCSVEntries">Download Videos CSV</button>
       </div>
       <div>
        <button type="button" @click="app.exportCSVPlaylists">Download Playlists CSV</button>
       </div>

       <h4>Database</h4>

       <div id="newDB" x-data="{
        newdbname: '',
        async submit($event) {
          app.createDB(this.newdbname)
          newDBInput.value = ''
        }
      }">
        <label for="newDBInput">Create New DB</label>
        <div id="newDBInputContainer">
         <input type="text" name="newDBInput" id="newDBInput" x-model="newdbname" placeholder="my_db"
          @keyup.enter="submit" />
         <button id="newDBInputSubmit" type="button" @click="submit()">Create</button>
        </div>
       </div>

       <div id="dbSelector" x-data="{
        selectedDB: 'RuntimeDB',
        dbs: Object.keys(alasql.databases).filter(x=>!['dbo','alasql'].includes(x))
        }">
        <label for="switchDBInput">Switch DB</label>
        <select id="switchDBInput" x-model="selectedDB" x-on:change="app.switchDB(selectedDB)">
         <template x-for="db in dbs">
          <option x-text="db"></option>
         </template>
        </select>
       </div>

       <div id="importDBInput">
        <label for="importDBFile">Import DB</label>
        <input id="importDBFile" type="file" onchange="app.importDB(event)" />
       </div>

      </div>
     </div>

     <details>
      <summary>Advanced Settings</summary>
      <div class="advSettings">
       <button type="button" @click="app.refreshView">Refresh UI</button>
      </div>

      <div class="advSettings">
       <button type="button" @click="alasql('delete from playlists;delete from entries;');app.refreshView()">⚠️ Delete
        All
        Playlists/Videos ⚠️</button>
      </div>

      <div class="advSettings">
       <button type="button" @click="alasql('delete from watched')">❗☠️ Delete All Watched 💣</button>
       <span>If you don't know what this does I recommend exporting the database before clicking. There should be no
        reason to click this. If you add playlists which reference the videos you've already
        seen
        they will be hidden for you--unless you click this button.</span>
      </div>
     </details>

    </details>

    <div id="tableContainer" :style="$store.sett.compact ? 'white-space: nowrap;' : ''">
     <div x-html="app.renderPlaylists()"></div>
    </div>

    <details>
     <summary>Frequently Asked Questions (FAQ)</summary>

     <h6>Why does it say I've already watched a video?</h6>
     <p>Unavailable videos are marked as watched when importing playlist data. They are counted as watched so you don't
      have to
      see them. If you want to see them just go to settings and uncheck "Hide watched videos" :)</p>

     <h6>Where did my playlist go?</h6>
     <p>Playlists without any unwatched videos will be hidden until new unwatched videos are available. Try clicking
      "Refresh Playlists" in the settings. This might take up to
      <code>(20 seconds * the number of playlists you have)</code>
     </p>

     <h6>Why are playlists limited to 2000 videos?</h6>
     <p>Unfortunetly, YouTube only wants us to request ~100 videos/second so to provide a snappy user experience we
      limit the playlist history to the most recent 2,000 videos. If YouTube ever provides a bulk API for this
      metadata--to aid long-tail video discovery--we will definitely raise this limit--but for now it would take 5 hours
      to scan the full TEDx channel. Not great. If, however, there is a userbase for it I can write a CLI tool that
      would save a file with the full history to import into this website.</p>

     <h6>Something else seems wrong</h6>
     <p>You can submit a bug report <a href="https://github.com/chapmanjacobd/lb-lite/issues/new">here</a>.</p>
    </details>


    <div xdata id='fun' style="display: flex;">
     <div>
      <button type="button"
       @click="$store.sett.selectedVideo = alasql('select value from entries where id not in (select id from watched) order by random() limit 1')[0]">Play
       Random 🎲</button>
     </div>

     <div>
      <button :style="$store.sett.autoplay ? 'background-color: #dcafb5;' : ''" type="button"
       @click="$store.sett.autoplay=!$store.sett.autoplay;app.automaticPlay()">
       Autoplay 🤖</button>
     </div>

     <div
      title="an axiom which states that the first 30% of any video can be skipped because it contains no worthwhile or interesting information">
      <button :style="$store.sett.wadsworth ? 'background-color: #dcafb5;' : ''" type="button" @click="">
       Wadsworth Constant ⏩</button>
     </div>

     <div title="goes to the next video after n seconds">
      <select x-model="$store.sett.shuffleMode">
       <option value="" disabled>Shuffle Mode 🔀</option>
       <option value="0">No shuffle</option>
       <option>20</option>
       <option>30</option>
       <option>40</option>
       <option>50</option>
       <option>60</option>
       <option>70</option>
       <option>80</option>
       <option>90</option>
       <option>100</option>
       <option>1000</option>
      </select>
     </div>

    </div>

    <div id="tableContainer" :style="$store.sett.compact ? 'white-space: nowrap;' : ''">
     <div x-html="app.renderEntrees()"></div>
    </div>

   </div>
  </template>
 </div>

 <div x-data id="footer">
  <span x-text="'Using ' + alasql.databases.dbo.databaseid"></span>
  <span style="float: right;">
   <span x-text="app.onomonopia() + ' '" style="font-size: small; font-weight: 500; font-style: italic;"
    title="web decor 🕸️ (this doesn't do anything)"></span>
   <span x-text="app.randimal()"></span>
  </span>
 </div>

</body>

</html>
